"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[3514],{9932:function(n,e,t){t.d(e,{Z:function(){return l}});var r=t(74165),i=t(15861),o=t(15671),a=t(43144),c=t(27415),s=t(56856),l=function(){function n(){(0,o.Z)(this,n)}return(0,a.Z)(n,null,[{key:"getCategoriesList",value:function(){var n=(0,i.Z)((0,r.Z)().mark((function n(){var e,t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=s.Z.get(),n.next=3,c.Z.get("/tenant/".concat(e,"/category-publication"));case 3:return t=n.sent,n.abrupt("return",t.data);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},{key:"getSearchResultsForPublicationsBasedOnSearchString",value:function(){var n=(0,i.Z)((0,r.Z)().mark((function n(e,t,i){var o,a,l;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o="",e.length>=1&&(o="?filter[descriptionFR]=".concat(e)),"autre"!==t&&(o=e.length>=1?"?filter[descriptionFR]=".concat(e,"&filter[categorie]=").concat(t):"?filter[categorie]=".concat(t)),a=s.Z.get(),n.next=6,c.Z.get("/tenant/".concat(a,"/publication").concat(o,"&limit=5&offset=").concat(i));case 6:return l=n.sent,n.abrupt("return",l.data);case 8:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()},{key:"searchUsingMainCatefories",value:function(){var n=(0,i.Z)((0,r.Z)().mark((function n(e,t,i){var o,a,l,d,u,f;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=s.Z.get(),n.next=3,c.Z.get("/tenant/".concat(l,"/category-publication?filter[titleFR]=").concat(t));case 3:return d=n.sent,u=null===(o=d.data.rows[0])||void 0===o?void 0:o.publications,f={rows:null!==u&&void 0!==u?u:[],count:null!==(a=null===u||void 0===u?void 0:u.length)&&void 0!==a?a:0},n.abrupt("return",f);case 7:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()},{key:"getSearchResultsForArchiveBasedOnSearchString",value:function(){var n=(0,i.Z)((0,r.Z)().mark((function n(e,t,i){var o,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=s.Z.get(),n.next=3,c.Z.get("/tenant/".concat(o,"/publication?filter[descriptionFR]=").concat(e,"&limit=5&offset=").concat(i,"&filter[statut]=archive").concat(t));case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()}]),n}()},39151:function(n,e,t){t.r(e),t.d(e,{default:function(){return U}});var r,i,o=t(30168),a=t(29439),c=t(72791),s=(0,c.createContext)(null),l=t(86538),d=t(9932),u=t(40071),f=t(78820),h=t(14651),p=t(80184);function g(n){var e=n.location,t=(0,c.useContext)(s),r=t.isLoading,i=t.setIsLoading,o=t.setSRP,a=t.searchString,l=t.setSearchString,g=t.publicationFilter,x=t.setcurrentPageIndex,j=function(n){i(!0),d.Z.getSearchResultsForPublicationsBasedOnSearchString(n,g,0).then((function(n){x(0),o((function(e){return e.concat(n)})),i(!1)}))};return(0,c.useEffect)((function(){var n,t;e.HOME_SEARCH_STRING&&e.HOME_SEARCH_STRING.length>=1&&(l(e.HOME_SEARCH_STRING),o([]),j(e.HOME_SEARCH_STRING)),e.ARCHIVE_SEARCH_STRING&&e.ARCHIVE_SEARCH_STRING.length>=1&&(l(e.ARCHIVE_SEARCH_STRING),o([]),n=e.ARCHIVE_SEARCH_STRING,t=e.ARCHIVE_FILTER,i(!0),d.Z.getSearchResultsForArchiveBasedOnSearchString(n,t,0).then((function(n){o((function(e){return e.concat(n)})),i(!1)})))}),[]),(0,p.jsx)(m,{children:(0,p.jsx)("form",{onSubmit:function(n){n.preventDefault(),o([]),j(a)},children:(0,p.jsxs)(v,{children:[(0,p.jsx)("input",{type:"text",value:a,onChange:function(n){l(n.target.value)}}),a.length>=1&&(0,p.jsx)("button",{type:"reset",id:"resetButton",onClick:function(n){l("")},children:(0,p.jsx)(h.S1K,{})}),!r&&a.length>=1?(0,p.jsxs)("button",{type:"submit",className:"searchButton",children:[(0,p.jsx)(u.uFR,{}),(0,p.jsx)("span",{children:"Chercher"})]}):(0,p.jsxs)("div",{id:"loadingButton",className:"searchButton",children:[!r&&(0,p.jsx)(u.uFR,{}),r&&(0,p.jsx)(f.Z7b,{className:"loadingIcon"}),!r&&(0,p.jsx)("span",{children:"Chercher"}),r&&(0,p.jsx)("span",{children:"loading"})]})]})})})}var x,m=l.ZP.div(r||(r=(0,o.Z)(["\n    margin-top: 1rem;\n"]))),v=l.ZP.div(i||(i=(0,o.Z)(["\n    width: 100%;\n    height: 60px;\n    padding: 0 .3rem;\n    background-color: #F1F1F1;\n    /* background-color: #F1F1F1; */\n\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    position: relative;\n    \n    input{\n        background-color: #F1F1F1;\n        font-size: 1rem;\n        font-weight: bold;\n        height: 50px;\n        width: 100%;\n        margin-right: .5rem;\n        color: #000;\n        padding-left: 1rem;\n    }\n\n    .searchButton{\n        height: 50px;\n        padding: 0 1rem;\n        color: #fff;\n        text-transform: uppercase;\n        font-size: 1.5rem;\n        background-color: red;\n\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n\n        span{\n            color: #fff;\n            margin-left: .5rem;\n        }\n    }\n\n    #loadingButton{\n        background-color: #E0E0E0;\n        color: #000;\n\n        .loadingIcon{\n            animation: spin .7s linear infinite;\n        }\n    }\n\n    #resetButton{\n        height: 1.8rem;\n        width: 1.8rem;\n\n        position: absolute;\n        right: 11rem;\n        \n        font-size: 1rem;\n        color: var(--gray3);\n        background-color: #E0E0E0;\n\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n    }\n\n    @keyframes spin {\n        from {transform:rotate(0deg);}\n        to {transform:rotate(360deg);}\n    }\n"]))),j=t(93433),b=t(2579);t(85862);function S(){var n=(0,c.useContext)(s),e=(n.SRP,n.setSRP),t=n.setIsLoading,r=n.searchString,i=(n.publicationFilter,n.setpublicationFilter),o=n.setcurrentPageIndex,l=(0,c.useState)([]),u=(0,a.Z)(l,2),f=u[0],h=u[1],g=(0,c.useState)(!0),x=(0,a.Z)(g,2),m=x[0],v=x[1];return(0,c.useEffect)((function(){d.Z.getCategoriesList().then((function(n){v(!0),h((function(e){return e.concat(n)})),v(!1)})).catch((function(n){console.error(n)}))}),[]),(0,p.jsxs)(w,{children:[!1===m&&(0,p.jsxs)("div",{id:"filterCategories",onChange:function(n){var a=n.target.value;i("autre"===a?"":a),t(!0),e([]),d.Z.searchUsingMainCatefories(r,a,0).then((function(n){o(0),e((function(e){return e.concat(n)})),t(!1)}))},children:[(0,p.jsxs)("label",{htmlFor:"all",children:[(0,p.jsx)("input",{type:"radio",name:"filterCat",value:"autre",id:"all",defaultChecked:!0}),(0,p.jsx)("span",{children:"tous"})]}),f.length>=1&&(0,p.jsx)(p.Fragment,{children:f[0].rows.map((function(n){return(0,p.jsxs)("label",{htmlFor:n._id,children:[(0,p.jsx)("input",{type:"radio",name:"filterCat",value:n.titleFR,id:n._id}),(0,p.jsx)("span",{children:n.titleFR})]},n._id)}))})]}),!0===m&&(0,p.jsx)("div",{className:"LoadingFlex",children:(0,j.Z)(Array(5)).map((function(n,e){return(0,p.jsx)(b.Z,{height:60,width:150},e)}))})]})}var y,w=l.ZP.div(x||(x=(0,o.Z)(["\n    display: block;\n    margin-top: 1rem;\n\n    #filterCategories{\n        width: 100%;\n        height: 60px;\n        padding: 0 4rem;\n        display: flex;\n        align-items:center;\n        justify-content: space-around;\n\n        input{\n            display: none;\n            &:checked+span {\n                opacity: 1;\n                background-color: var(--violet);\n                color: #fff;\n                border-color: var(--violet);\n            }\n        }\n\n        label{\n            display: inline-block;\n            margin-right: 1rem;\n            span{\n                font-family: 'Bebas Neue';\n                font-style: normal;\n                font-weight: 400;\n                font-size: 18px;\n                line-height: 22px;\n                text-align: center;\n                text-transform: uppercase;\n                color: #2B2840;\n                opacity: .5;\n\n                cursor: pointer;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                min-width: 100px;\n                height: 48px;\n                padding: 0 1rem;\n                border: 2px solid #F1F1F1;\n                \n                &:hover{\n                    opacity: 1;\n                    background-color: var(--violet);\n                    color: #fff;\n                    border-color: var(--violet);\n                }\n            }\n        }\n    }\n\n    .LoadingFlex{\n        width: 100%;\n        height: 70px;\n        \n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-evenly;\n    }\n"]))),Z=t(53540),P=t(72426),C=t.n(P);function R(n){n._id;var e=n.date,t=n.content,r=n.thumbnail,i=C()(e).format("l");return(0,p.jsxs)(F,{children:[(0,p.jsx)("div",{className:"cardDate",children:i}),(0,p.jsxs)("div",{className:"cardContent",children:[(0,p.jsx)("strong",{children:"TITLE HERE"}),(0,Z.ZP)(t)]}),(0,p.jsx)("div",{className:"cardImage",style:{backgroundImage:"url("+r+")"}})]})}var k,F=l.ZP.div(y||(y=(0,o.Z)(["\n    width: 100%;\n    margin-top: 1rem;\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    justify-content: space-between;\n\n    font-family: 'Bebas Neue Pro';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n\n    border-top: 1px solid #E0E0E0;\n    padding-top: 1rem;\n\n    .cardDate{\n        width: 100px;\n        color: #A3A3A9;\n    }\n\n    .cardContent{\n        width: 470px;\n        height: 100px;\n        overflow-y: hidden;\n\n        strong{\n            color: #2B2840;\n            font-family: 'Bebas Neue Pro';\n            font-style: normal;\n            font-size: 20px;\n\n            &:hover{\n                text-decoration: underline;\n            }\n        }\n\n        p{\n            margin-top: .3rem;\n            font-family: 'Proxima Nova';\n            font-style: normal;\n            font-weight: 400;\n            font-size: 14px;\n            line-height: 25px;\n            color: #4F4F4F;\n            text-align: justify;\n        }\n    }\n\n    .cardImage{\n        width: 270px;\n        height: 175px;\n        background-size: cover;\n        background-position: center;\n    }\n\n"]))),A=t(39126);function N(n){var e=n.currentPostsToShow,t=(0,c.useContext)(s).isLoading;return(0,p.jsx)("div",{children:(0,p.jsx)(I,{children:!0===t?(0,p.jsx)("section",{children:(0,p.jsx)(b.Z,{height:170})}):(0,p.jsx)("section",{children:e.length>=1?(0,p.jsx)("section",{children:e.map((function(n,e){var t,r,i;return n.supports.length>=1&&(i=function(n){var e="https://via.placeholder.com/270x175";return n.forEach((function(n){if(n.downloadUrl&&n.downloadUrl.length>=1){var t=n.downloadUrl.substring(n.downloadUrl.lastIndexOf(".")+1,n.downloadUrl.length);"png, jpg, jpeg, gif".includes(t)&&(e=n.downloadUrl)}})),e}(n.supports)),(0,p.jsx)(R,{_id:null!==(t=n._id)&&void 0!==t?t:0,date:n.createdAt,content:null!==(r=n.descriptionFR)&&void 0!==r?r:"N.A",thumbnail:i},e)}))}):(0,p.jsxs)("h3",{id:"noDataFound",children:[(0,p.jsx)(A.$gH,{}),"\xa0No data found !"]})})})})}var E,I=l.ZP.div(k||(k=(0,o.Z)(["\n    width: 100%;\n    margin: 1rem 0;\n\n    #noDataFound{\n        font-family: 'Proxima Nova';\n        font-style: normal;\n        font-weight: 100;\n        font-size: 1.5rem;\n        text-align: center;\n        color: #c7c6c6;\n\n        width: 100%;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: center;\n    }\n"]))),_=t(16856);function B(n){for(var e=n.totalPosts,t=(0,c.useContext)(s),r=t.setIsLoading,i=t.setSRP,o=t.searchString,a=t.numberOfPostsPerPage,l=t.currentPageIndex,u=t.setcurrentPageIndex,f=[],h=0;h<Math.ceil(e/a);h++)f.push(h);var g=function(n,e){r(!0),i([]),"prev"===e&&(u(n-1),x(n-1)),"next"===e&&(u(n+1),x(n+1))},x=function(n){d.Z.getSearchResultsForPublicationsBasedOnSearchString(o,"autre",5*n).then((function(n){i((function(e){return e.concat(n)})),r(!1)})).catch((function(n){console.error(n)}))};return(0,p.jsxs)(L,{children:[l>=1?(0,p.jsxs)("button",{className:"pageSkipper prevSkipper",onClick:function(){return g(l,"prev")},children:[(0,p.jsx)(_.D68,{className:"icon prev"}),"Pr\xe9c\xe9dent"]}):(0,p.jsxs)("button",{className:"pageSkipper diabled",disabled:!0,children:[(0,p.jsx)(_.D68,{className:"icon prev"}),"Pr\xe9c\xe9dent"]}),(0,p.jsx)("div",{id:"pagination",children:f.map((function(n){return(0,p.jsx)("button",{className:n===l?"activeIndex":"",onClick:function(){return function(n){r(!0),u(n),i([]),x(n)}(n)},children:n+1},n)}))}),l<e/a-1?(0,p.jsxs)("button",{className:"pageSkipper nextSkipper",onClick:function(){return g(l,"next")},children:["Suivant",(0,p.jsx)(_.acS,{className:"icon next"})]}):(0,p.jsxs)("button",{className:"pageSkipper diabled",disabled:!0,children:["Suivant",(0,p.jsx)(_.acS,{className:"icon next"})]})]})}var H,z,L=l.ZP.div(E||(E=(0,o.Z)(["\n    width: 100%;\n    margin-top: 3rem;\n    margin-bottom: 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    button{\n        height: 35px;\n        width: 100px;\n        font-family: 'Proxima Nova';\n        font-size: 12px;\n        color: var(--violet);\n        border: 1px solid #A3A3A9;\n        background-color: transparent;\n\n        &:hover{\n            background-color: var(--violet);\n            border: 1px solid var(--violet);\n            color: #fff;\n        }\n        &:hover .icon{\n            background-color: transparent;\n        }\n    }\n\n    .pageSkipper{\n        display: flex;\n        align-items: center;\n        justify-content: space-evenly;\n        color: var(--violet);\n        .next{\n            /* margin-left: .2rem; */\n            font-size: 1.3rem;\n        }\n\n        .prev{\n            /* margin-right: .2rem; */\n            font-size: 1.3rem;\n            \n        }\n    }\n    .diabled{ \n        color: #A3A3A9;\n        &:hover{\n            background-color: transparent;\n            color: #A3A3A9;\n            border: 1px solid #A3A3A9;\n            cursor: default;\n        }\n    }\n\n    #pagination{\n        margin: 0 .5rem;\n        width: calc(fit-content + 100px);\n        display: flex;\n        justify-content: space-between;\n\n        button{\n            display: inline-block;\n            width: 40px;\n            min-width: fit-content;\n            height: 35px;\n            margin: 0 .2rem;\n\n        }\n\n        .activeIndex{\n            background-color: var(--violet);\n            color: #fff;\n        }\n    }\n"])));function O(){var n=(0,c.useContext)(s),e=n.setIsLoading,t=n.SRP,r=n.setSRP,i=n.searchString,o=[];return t.length>=1&&t[0].rows.length>=1&&(o=t[0].rows),(0,p.jsxs)(D,{children:[(0,p.jsx)(G,{children:t.length>=1&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("strong",{children:t[0].count}),(0,p.jsx)("span",{children:"r\xe9sultat pour cette recherche"})]}),(0,p.jsxs)("div",{id:"filterContainer",children:[(0,p.jsx)("span",{children:"Trier par"}),(0,p.jsxs)("select",{name:"filterBy",id:"filterBySelect",onChange:function(n){e(!0),r([]);var t="&orderBy=[".concat(n.target.value,"]");d.Z.getSearchResultsForPublicationsBasedOnSearchString(i,t,0).then((function(n){r((function(e){return e.concat(n)})),e(!1)})).catch((function(n){console.error(n)}))},children:[(0,p.jsx)("option",{value:"",children:"--"}),(0,p.jsx)("option",{value:"createdAt_DESC",children:"Date ( Desc )"}),(0,p.jsx)("option",{value:"createdAt_ASC",children:"Date ( Asc )"}),(0,p.jsx)("option",{value:"az",children:"Name A-Z"}),(0,p.jsx)("option",{value:"za",children:"Name Z-A"})]})]})]})}),(0,p.jsx)(N,{currentPostsToShow:o}),(0,p.jsx)(B,{totalPosts:t.length>=1?t[0].count:0})]})}var T,D=l.ZP.div(H||(H=(0,o.Z)(["\n    margin-top: 1rem;\n"]))),G=l.ZP.div(z||(z=(0,o.Z)(["\n    width: 100%;\n    padding: 1rem 0;\n    font-size: 14px;\n    \n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    \n    div{\n        strong{\n            margin-right: .4rem;\n        }\n        span, strong{\n            font-family: 'Proxima Nova';\n            font-style: normal;\n            font-weight: 400;\n            font-size: 14px;\n            margin-right: .5rem;\n        }\n    }\n\n    #filterContainer{\n        span{\n            font-family: 'Proxima Nova';\n            font-style: normal;\n            font-weight: 400;\n            font-size: 14px;\n            margin-right: .5rem;\n        }\n\n        select{\n            padding: .5rem;\n            font-family: 'Proxima Nova';\n            font-style: normal;\n            font-weight: 700;\n            font-size: 14px;\n            line-height: 17px;\n            color: #2B2840;\n        }\n    }\n"])));function U(n){var e=n.location,t=(0,c.useState)(!1),r=(0,a.Z)(t,2),i=r[0],o=r[1],l=(0,c.useState)(""),d=(0,a.Z)(l,2),u=d[0],f=d[1],h=(0,c.useState)([]),x=(0,a.Z)(h,2),m=x[0],v=x[1],j=(0,c.useState)("autre"),b=(0,a.Z)(j,2),y=b[0],w=b[1],Z=(0,c.useState)(0),P=(0,a.Z)(Z,2),C=P[0],R=P[1],k=(0,c.useState)(5),F=(0,a.Z)(k,2),A=F[0],N=F[1];return(0,p.jsx)(s.Provider,{value:{isLoading:i,setIsLoading:o,SRP:m,setSRP:v,searchString:u,setSearchString:f,publicationFilter:y,setpublicationFilter:w,currentPageIndex:C,setcurrentPageIndex:R,numberOfPostsPerPage:A,setnumberOfPostsPerPage:N},children:(0,p.jsx)(M,{children:(0,p.jsxs)("section",{className:"wideContent",children:[(0,p.jsx)(g,{location:e}),(0,p.jsx)(S,{}),(0,p.jsx)(O,{})]})})})}var M=l.ZP.section(T||(T=(0,o.Z)(["\n    height: 100%;\n    .wideContent{\n        padding: 0 7rem;\n    }\n\n"])))}}]);
//# sourceMappingURL=3514.6d379d41.chunk.js.map